<script type="text/worker">
    const buttonlist = ["character","magick"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
</script>


<div class="sheet-pagination-buttons">
    <button type="action" name="act_character">Авантюрист</button>
    <button type="action" name="act_magick">Магия</button>
</div>
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character"/>


<div class="sheet-character-page">
    <div class="sheet-namelvl sheet-block">
        <p class="sheet-pagetitle">
            <text>Авантюрист</text>
        </p>
    
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename">Имя</text>
            <input class="sheet-attrubutetextbox sheet-no-outline" type="text" name="attr_character_name"/>
        </p>
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename">Народ</text>
            <input class="sheet-attrubutetextbox sheet-no-outline" type="text" name="attr_character_folk"/>
        </p>
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename">Класс</text>
            <input class="sheet-attrubutetextbox sheet-no-outline" type="text" name="attr_character_class"/>
        </p>
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename">Цель</text>
            <input class="sheet-attrubutetextbox" type="text sheet-no-outline" name="attr_character_goal"/>
        </p>
    
        <div class="sheet-row-section sheet-stat-row">
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Уровень</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_level"/>
            </span>
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Опыт</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_xp"/>
            </span>
        
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Великолепие</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_majesty"/>
            </span>
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Перебросы</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_rerolls"/>
            </span>
        
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Голод</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_hunger"/>
            </span>
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Жажда</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-no-outline" type="text" name="attr_character_thirst"/>
            </span>
        </div>
    </div>
  
    <div class="sheet-characteristics sheet-block">
        <p class="sheet-pageblocktitle">
            <text>Характеристики</text>
        </p>
      
        <p class="sheet-chars-titles">
            <span class="sheet-chars-value-title">Значение</span>
            <span class="sheet-chars-mod-title">Модификатор</span>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Сила</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_str"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_str_mod"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Ловкость</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_dex"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_dex_mod"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Телосложение</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_con"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_con_mod"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Мудрость</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_wis"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_wis_mod"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Интеллект</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_int"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_int_mod"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row sheet-char-row">
            <text class="sheet-attributename sheet-char-name">Харизма</text>
            <input class="sheet-statbox sheet-no-outline" type="text" name="attr_character_chr"></input>
            <input class="sheet-statmodbox sheet-no-outline" type="text" name="attr_character_chr_mod"></input>
        </p>
    </div>
  
    <div class="sheet-savingthrows sheet-block">
        <p class="sheet-pageblocktitle">
            <text>Спасброски</text>
        </p>
      
        <p class="sheet-savings-titles">
            <span class="sheet-savings-base-title">База</span>
            <span class="sheet-savings-mod-title">Модификатор</span>
            <span class="sheet-savings-penalty-title">Штраф</span>
            <span class="sheet-savings-outcome-title">Итог</span>
        </p>
      
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename sheet-char-name">Стойкость</text>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_durability_base"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_durability_mod"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_durability_penalty"></input>
            <input class="sheet-savingoutcomebox sheet-no-outline" type="text" name="attr_durability_result"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename sheet-char-name">Уклонение</text>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_evasion_base"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_evasion_mod"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_evasion_penalty"></input>
            <input class="sheet-savingoutcomebox sheet-no-outline" type="text" name="attr_evasion_result"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename sheet-char-name">Дух</text>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_spirit_base"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_spirit_mod"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_spirit_penalty"></input>
            <input class="sheet-savingoutcomebox sheet-no-outline" type="text" name="attr_spirit_result"></input>
        </p>
      
        <p class="sheet-align-right sheet-stat-row">
            <text class="sheet-attributename sheet-char-name">Удача</text>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_luck_base"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_luck_mod"></input>
            <input class="sheet-savingbox sheet-no-outline" type="text" name="attr_luck_penalty"></input>
            <input class="sheet-savingoutcomebox sheet-no-outline" type="text" name="attr_luck_result"></input>
        </p>
    </div>
  
    <div class="sheet-hitpoints sheet-block">
        <div class="sheet-row-section">
            <span class="sheet-align-left-halfwidth">
                <p class="sheet-pageblocktitle-halfwidth">Хит-пойнты</p>
            </span>
            <span class="sheet-align-right-halfwidth">
                <text>Максимум</text>
                <input class="sheet-maxhpbox sheet-no-outline" type="text" name="attr_max_hp"></input>
            </span>
        </div>
    
        <p class="sheet-attributename">
            Текущие ХП
            <input class="sheet-currenthpbox sheet-no-outline" type="text" name="attr_current_hp"></input>
        </p>
    </div>
  
    <div class="sheet-feats sheet-block">
        <p class="sheet-pageblocktitle">Черты</p>
        
        <fieldset class="repeating_feats">
            <input class="sheet-featbox sheet-no-outline" type="text" name="attr_featname">
        </fieldset>
    </div>
    
    <div class="sheet-scars sheet-block">
        <p class="sheet-pageblocktitle">Шрамы</p>

        <fieldset class="repeating_scars">
            <input class="sheet-scarbox sheet-no-outline" type="text" name="attr_scarname">
        </fieldset>
    </div>
    
    <div class="sheet-armor sheet-block">
        <div class="sheet-row-section">
            <span class="sheet-align-left-halfwidth">
                <p class="sheet-pageblocktitle-halfwidth">Доспех</p>
            </span>
            <span class="sheet-align-right-halfwidth">
                <span class="sheet-armorclass-attr-name">КБ</span>
                <input class="sheet-armorclassbox sheet-no-outline" type="text" name="attr_armorclass"></input>
            </span>
        </div>
        
        <div class="sheet-row-section sheet-stat-row">
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Тип</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-armortype-box sheet-no-outline" type="text" name="attr_armortype"/>
            </span>
            <span class="sheet-align-right-halfwidth">
                <text class="sheet-attributename">Щит</text>
                <input class="sheet-attrubutetextbox-halfwidth sheet-shield-box sheet-no-outline" type="text" name="attr_shield"/>
            </span>
        </div>
        
        <div class="sheet-row-section sheet-stat-row">
            <span class="sheet-align-left-quarterwidth sheet-attributename sheet-armordescription-name">
                Описание
            </span>
            <span class="sheet-align-right-threequarterwidth">
                <textarea class="sheet-armordescription-box sheet-no-outline" type="text" name="attr_armordescription" maxlength="55"></textarea>
            </span>
        </div>

        <div class="sheet-row-section-blocked sheet-stat-row">
            <span class="sheet-align-left-quarterwidth sheet-attributename">
                Штраф спасброска
            </span>
            <span class="sheet-align-left-quarterwidth sheet-penalty-description">
                <input type="checkbox" name="attr_hasdurabilitypenalty" value="1">
                Стойк.
            </span>
            <span class="sheet-align-left-quarterwidth sheet-penalty-description">
                <input type="checkbox" name="attr_hasevasionpenalty" value="1">
                Уклон.
            </span>
            <span class="sheet-align-left-quarterwidth sheet-penalty-description">
                <input type="checkbox" name="attr_hasspiritpenalty" value="1">
                Дух
            </span>
        </div>
    </div>
 
    <div class="sheet-weapon sheet-block">
        <div class="sheet-row-section">
            <span class="sheet-align-left-quarterwidth">
                <p class="sheet-pageblocktitle-halfwidth">Оружие</p>
            </span>
            <span class="sheet-align-right-threequarterwidth">
                <span class="sheet-attackbonus-attr-name">Базовый бонус атаки</span>
                <input class="sheet-attackbonusbox sheet-no-outline" type="text" name="attr_attackbonus"></input>
            </span>
        </div>
        
        <p class="sheet-weapons-stats-titles">
            <span class="sheet-weapon-description-title">Описание</span>
            <span class="sheet-weapon-ammo-title">Боеприпасы</span>
            <span class="sheet-weapon-attack-bonus-title">Бонус атаки</span>
            <span class="sheet-weapon-damage-title">Урон</span>
        </p>
      
        <p class="sheet-align-right sheet-weapon-stats-row">
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-description-box" type="text" name="attr_weapon_1_description"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-ammo-box" type="text" name="attr_weapon_1_ammo"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-attack-bonus-box" type="text" name="attr_weapon_1_attack_bonus"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-damage-box" type="text" name="attr_weapon_1_damage"></input>
        </p>
      
        <p class="sheet-align-right sheet-weapon-stats-row">
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-description-box" type="text" name="attr_weapon_2_description"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-ammo-box" type="text" name="attr_weapon_2_ammo"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-attack-bonus-box" type="text" name="attr_weapon_2_attack_bonus"></input>
            <input class="sheet-weaponstat-box sheet-no-outline sheet-weaponstat-damage-box" type="text" name="attr_weapon_2_damage"></input>
        </p>
    </div>

    <div class="sheet-inventory sheet-block">

        <div>
            <p class="sheet-pageblocktitle">Инвентарь</p>

            <p class="sheet-inventory-columns-titles">
                <span class="sheet-inventory-name-title sheet-prepared-items-name-title">Подготовленные вещи</span>
                <span class="sheet-inventory-weight-title">Вес</span>
            </p>

            <fieldset class="repeating_prepareditems">
                <input class="sheet-inventory-name sheet-no-outline" type="text" name="attr_prepared_item_name"></input>
                <input class="sheet-inventory-weight sheet-no-outline" type="text" name="attr_prepared_item_weight"></input>
            </fieldset>

            <p class="sheet-inventory-summary">
                <span class="sheet-inventory-prepared-summary-title">Общий вес подготовленных вещей</span>
                <input class="sheet-inventory-summary-weight sheet-no-outline" type="text" name="attr_prepared_summary_weight"></input>
            </p>
        </div>

        <div>
            <p class="sheet-inventory-columns-titles">
                <span class="sheet-inventory-name-title sheet-stacked-items-name-title">Уложенные вещи</span>
                <span class="sheet-inventory-weight-title">Вес</span>
            </p>

            <fieldset class="repeating_stackeditems">
                <input class="sheet-inventory-name sheet-no-outline" type="text" name="attr_stacked_item_name"></input>
                <input class="sheet-inventory-weight sheet-no-outline" type="text" name="attr_stacked_item_weight"></input>
            </fieldset>

            <p class="sheet-inventory-summary">
                <span class="sheet-inventory-stacked-summary-title">Общий вес уложенных вещей</span>
                <input class="sheet-inventory-summary-weight sheet-no-outline" type="text" name="attr_stacked_summary_weight"></input>
            </p>
        </div>
    </div>
</div>


<div class="sheet-magick-page">
    <div class="sheet-magick sheet-block">
        <p class="sheet-pagetitle">
            <text>Магия</text>
        </p>
    </div>

    <div class="sheet-magick-faith-points sheet-block">
        <div>
            <div class="sheet-row-section">
                <span class="sheet-align-left-halfwidth">
                    <p class="sheet-pageblocktitle sheet-magick-faith-points-block-title">Очки веры/колдовства</p>
                </span>
                <span class="sheet-align-right-halfwidth">
                    <span class="sheet-magick-faith-points-max-title">Максимум</span>
                    <input class="sheet-magicfaithpointsmaxbox sheet-no-outline" type="text" name="attr_max_magick_faith_points"></input>
                </span>
            </div>

            <div class="sheet-row-section">
                <p class="sheet-magick-faith-points-current-title">Текущие</p>
                <input class="sheet-currentmagickfaithpointsbox sheet-no-outline" type="text" name="attr_current_magick_faith_points"></input>
            </div>
        </div>
    </div>

    <div class="sheet-allowed-spells sheet-block">
        <p class="sheet-pageblocktitle">
            <text>Доступные заклинания</text>
        </p>

        <div class="sheet-row-section">
            <div class="sheet-align-left-halfwidth">
                <input class="sheet-allowed-spell-checkbox" type="checkbox" name="attr_allowed_lesser_spells" value="1"> Младшие (1+)
            </div>
            <div class="sheet-align-left-halfwidth">
                <input type="checkbox" name="attr_allowed_older_spells" value="1"> Старшие (4+)
            </div>
        </div>
        <div class="sheet-row-section">
            <div class="sheet-align-left-halfwidth">
                <input class="sheet-allowed-spell-checkbox" type="checkbox" name="attr_allowed_greater_spells" value="1"> Великие (7+)
            </div>
            <div class="sheet-align-left-halfwidth">
                <input type="checkbox" name="attr_allowed_legendary_spells" value="1"> Легендарные (13+)
            </div>
        </div>
    </div>

    <div class="sheet-priest-power-spheres sheet-block">
        <div>
            <p class="sheet-pageblocktitle">Сферы могущества жреца</p>
            <p class="sheet-powershperes-help">
                Две сферы на 1 уровне, ещё по одной на 3, 6, 9, 15 и 20 уровнях
            </p>
        </div>

        <div>
            <fieldset class="repeating_priestspheres">
                <input class="sheet-priest-power-sphere-box sheet-no-outline" type="text" name="attr_priest_power_sphere"></input>
            </fieldset>
        </div>
    </div>

    <div class="sheet-unallowed-powerspheres-help sheet-block">
        <p class="sheet-unallowed-powershperes-help">
            Заклинания не из выбранных сфер стоят на 1 очко веры дороже.
            Жрец должен пройти проверку мудрости или харизмы со сложностью
        </p>
            <ul class="sheet-unallowed-powershperes-help">
                <li>9 для младшего заклинания</li>
                <li class="sheet-unallowed-powershperes-help">11 для старшего</li>
                <li class="sheet-unallowed-powershperes-help">13 для великого</li>
                <li class="sheet-unallowed-powershperes-help">15 для легендарного</li>
            </ul>
        <p class="sheet-unallowed-powershperes-help">
            При провале заклинание не срабатывает, а потраченные на него очки веры теряются. Жрец не может пытаться использовать любые заклинания этой сферы в течение дня.
        </p>
    </div>

    <div class="sheet-mage-spells-header sheet-block">
        <p class="sheet-pageblocktitle">Заклинания мага</p>
        <p class="sheet-mage-spells-help">На первом уровне магу известно три заклинания плюс лучший из модификаторов его интеллекта или харизмы</p>
    </div>

    <div class="sheet-mage-spells sheet-block">
        <div>
            <fieldset class="repeating_magespells">
                <input class="sheet-mage-spell-box sheet-no-outline" type="text" name="attr_mage_spell"></input>
            </fieldset>
        </div>
    </div>

    <div class="sheet-spells-without-magic-points sheet-block">
        <p class="sheet-pageblocktitle">Заклинания без очков колдовства</p>
        <p class="sheet-spells-without-magick-points-help">
            Пройти проверку интеллекта или харизмы со сложностью 11; при каждой следующей попытке в тот же день сложность увеличивается на 2. При провале игрок должен бросить 2к6 по приведённой ниже таблице, чтобы определить последствия провала для своего персонажа. Если при проверке интеллекта выпала натуральная 2, вышедшая из-под контроля волшебная энергия затрагивает и соратников мага: последствия определяются броском 2к8 по таблице для каждого участника группы отдельно.
        </p>

        <ul class="sheet-spells-without-magick-points-help">
            <li><strong>2</strong> — Магическая энергия выжигает мозг героя, превращая его в завывающего безумного маньяка. Персонаж перманентно переходит под контроль ведущего, получает возможность сотворять любые известные ему заклинания без траты колдовства, и должен немедленно атаковать любую ближайшую к нему цель</li>
            <li><strong>3</strong> — Колдовская энергия окутывает тело героя ярким обжигающим пламенем: персонаж получает два случайных шрама по таблице на странице 36 правил</li>
            <li><strong>4</strong> — Неконтролируемая магия навсегда ослабляет героя. Персонаж теряет уровень и весь опыт сверх необходимого для достижения уровня, который теперь имеет</li>
            <li><strong>5</strong> — Магический разряд обжигает сознание героя, стирая воспоминания. Маг забывает заклинание, которое пытался сотворить и должен заучить его заново. Также персонаж полностью теряет одну из черт по своему выбору</li>
            <li><strong>6-7</strong> —  Разбушевавшаяся магия меняет героя. Две случайные характеристики персонажа меняются местами</li>
            <li><strong>8-10</strong> — Персонаж получает к6 повреждений за каждый уровень сотворившего заклинание мага</li>
            <li><strong>11-12</strong> — Разряд магии серьёзно потрепал персонажа, но со временем он придёт в норму. Случайная характеристика персонажа уменьшается до 3, пока не восстановится естественным образом</li>
            <li><strong>13</strong> —  Персонаж находится в шоке от выброса магии. Все его броски производятся со штрафом -2 до тех пор, пока он не потратит день на отдых</li>
            <li><strong>14</strong> — Волшебный вихрь изменяет саму природу героя. Пол персонажа меняется на противоположный</li>
            <li><strong>15</strong> — Персонаж слегка потрёпан, но в целом избегает каких-то серьёзных последствий</li>
            <li><strong>16</strong> — Персонажу удаётся направить текущую по его телу энергию себе на пользу. Герой восстанавливает свои хит-пойнты и очки колдовства/веры до максимума, и получает бонус +1 ко всем броскам до конца дня</li>
        </ul>
    </div>
</div>
